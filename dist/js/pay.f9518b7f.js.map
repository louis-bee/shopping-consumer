{"version":3,"file":"js/pay.f9518b7f.js","mappings":"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","sources":["webpack://shopping-consumer/./src/views/pay/Pay.vue","webpack://shopping-consumer/src/views/pay/Pay.vue","webpack://shopping-consumer/./src/views/pay/Pay.vue?763f","webpack://shopping-consumer/./src/views/pay/Pay.vue?88c4","webpack://shopping-consumer/./src/components/Footer.vue","webpack://shopping-consumer/src/components/Footer.vue","webpack://shopping-consumer/./src/components/Footer.vue?593f","webpack://shopping-consumer/./src/components/Footer.vue?9895","webpack://shopping-consumer/./src/components/Header.vue","webpack://shopping-consumer/src/components/Header.vue","webpack://shopping-consumer/./src/components/Header.vue?6efa","webpack://shopping-consumer/./src/components/Header.vue?03e2"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('Header',{attrs:{\"fix\":true,\"link\":'cart'},on:{\"tab-change\":_vm.handleTabChange}}),_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"cart\"},[_c('div',{staticClass:\"list\"},_vm._l((_vm.list),function(item){return _c('li',{key:item.id},[_c('div',{staticClass:\"img\"},[_c('img',{attrs:{\"src\":item.image || require('@/assets/img/examplegoods.webp'),\"alt\":\"\"}}),_c('div',{staticClass:\"point\"},[_vm._v(_vm._s(item.number))])]),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.goodsName))]),_c('div',{staticClass:\"price\"},[_vm._v(\"￥\"+_vm._s((item.price*item.number).toFixed(2)))])])}),0),_c('div',{staticClass:\"total-box\"},[_c('h3',[_vm._v(\"总计\")]),_c('div',{staticClass:\"total\"},[_vm._v(\"￥\"+_vm._s(_vm.totalPrice))])])]),_c('div',{staticClass:\"right-box\"},[_c('div',{staticClass:\"form\"},[_c('h4',[_vm._v(\"收货地址\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.address),expression:\"form.address\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请填写收货地址\"},domProps:{\"value\":(_vm.form.address)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"address\", $event.target.value)}}}),_c('h4',[_vm._v(\"电子邮箱\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.email),expression:\"form.email\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请填写电子邮箱\"},domProps:{\"value\":(_vm.form.email)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"email\", $event.target.value)}}}),_c('h4',[_vm._v(\"验证码\")]),_c('div',{staticClass:\"code-box\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.code),expression:\"form.code\"}],staticClass:\"code\",attrs:{\"type\":\"text\",\"placeholder\":\"请填写验证码\"},domProps:{\"value\":(_vm.form.code)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"code\", $event.target.value)}}}),(_vm.sendStatus===1)?_c('div',{staticClass:\"send\",on:{\"click\":_vm.sendCode}},[_vm._v(\"发送验证码\")]):(_vm.sendStatus===2)?_c('div',{staticClass:\"send pending\"},[_vm._v(\"(\"+_vm._s(_vm.timeCounter)+\")秒后重新发送\")]):_c('div',{staticClass:\"send\",on:{\"click\":_vm.sendCode}},[_vm._v(\"重新发送\")])]),_c('div',{staticClass:\"submit\",on:{\"click\":_vm.submit}},[_vm._v(\"确认支付\")])])])])]),_c('Footer')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <Header :fix=true @tab-change=\"handleTabChange\" :link=\"'cart'\"></Header>\r\n    <div class=\"main\">\r\n      <div class=\"container\">\r\n        <div class=\"cart\">\r\n          <div class=\"list\">\r\n            <li v-for=\"item in list\" :key=\"item.id\">\r\n              <div class=\"img\">\r\n                <img :src=\"item.image || require('@/assets/img/examplegoods.webp')\" alt=\"\">\r\n                <div class=\"point\">{{ item.number }}</div>\r\n              </div>\r\n              <div class=\"name\">{{ item.goodsName }}</div>\r\n              <div class=\"price\">￥{{ (item.price*item.number).toFixed(2) }}</div>\r\n            </li>\r\n          </div>\r\n          <div class=\"total-box\">\r\n            <h3>总计</h3><div class=\"total\">￥{{ totalPrice }}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"right-box\">\r\n          <div class=\"form\">\r\n            <h4>收货地址</h4>\r\n            <input v-model=\"form.address\" type=\"text\" placeholder=\"请填写收货地址\">\r\n            <h4>电子邮箱</h4>\r\n            <input v-model=\"form.email\" type=\"text\" placeholder=\"请填写电子邮箱\">\r\n            <h4>验证码</h4>\r\n            <div class=\"code-box\">\r\n              <input class=\"code\" v-model=\"form.code\" type=\"text\" placeholder=\"请填写验证码\">\r\n              <div class=\"send\" v-if=\"sendStatus===1\" @click=\"sendCode\">发送验证码</div>\r\n              <div class=\"send pending\" v-else-if=\"sendStatus===2\">({{ timeCounter }})秒后重新发送</div>\r\n              <div class=\"send\" v-else @click=\"sendCode\">重新发送</div>\r\n            </div>\r\n            <div class=\"submit\" @click=\"submit\">确认支付</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <Footer></Footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Footer from '@/components/Footer.vue'\r\nimport Header from '@/components/Header.vue'\r\nexport default {\r\n  name: 'Pay',\r\n  components: {\r\n    Header,\r\n    Footer\r\n  },\r\n  data () {\r\n    return {\r\n      list: [],\r\n      form: {\r\n        address: '随便',\r\n        email: '13724648288@163.com'\r\n      },\r\n      sendStatus: 1,\r\n      timeCounter: 59\r\n    }\r\n  },\r\n  computed: {\r\n    totalPrice () {\r\n      const res = this.list.reduce((sum, item) => {\r\n        return sum + (item.price * item.number)\r\n      }, 0)\r\n      return res.toFixed(2)\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getCartList()\r\n  },\r\n  methods: {\r\n    handleTabChange (typeId) {\r\n      this.$router.push({ path: '/', query: { typeId: typeId } })\r\n    },\r\n    async getCartList () {\r\n      this.$apis.cart.getCartList({ userId: JSON.parse(localStorage.getItem('userInfo')).id }).then(res => {\r\n        if (res.status === 200) {\r\n          this.list = res.data.list.map(item => {\r\n            return {\r\n              ...item,\r\n              image: `${process.env.VUE_APP_API_URL}/uploads/` + item.images[0]\r\n            }\r\n          })\r\n          console.log(res.desc)\r\n        }\r\n      })\r\n    },\r\n    sendCode () {\r\n      const store = this.sendStatus\r\n      this.sendStatus = 2\r\n      this.timeCounter = 59\r\n      const params = {\r\n        email: this.form.email,\r\n        userId: JSON.parse(localStorage.getItem('userInfo')).id\r\n      }\r\n      this.$apis.pay.sendCode(params).then(res => {\r\n        if (res.status === 200) {\r\n          this.sendStatus = 2\r\n          this.timeCounter = 59\r\n          const timer = setInterval(() => {\r\n            this.timeCounter--\r\n            if (this.timeCounter === 0) {\r\n              this.sendStatus = 3\r\n              clearTimeout(timer)\r\n            }\r\n          }, 1000)\r\n          console.log(res.desc)\r\n        } else {\r\n          this.sendStatus = store\r\n          alert(res.desc)\r\n          // console.log(res.desc)\r\n        }\r\n      })\r\n    },\r\n    async submit () {\r\n      if (!this.form.address) return alert('地址不能为空')\r\n      if (!this.form.email) return alert('请填写邮箱地址')\r\n      if (!this.form.code) return alert('请输入验证码')\r\n      const userInfo = JSON.parse(localStorage.getItem('userInfo'))\r\n      const res = await this.$apis.pay.getBalance({ userId: userInfo.id })\r\n      const newBalance = parseFloat(res.data.balance)\r\n      userInfo.balance = newBalance\r\n      localStorage.setItem('userInfo', JSON.stringify(userInfo))\r\n      if (newBalance < this.totalPrice) {\r\n        return alert('账户余额不足，请先充值') // 待优化：弹窗选择\r\n      }\r\n      const params = {\r\n        ...this.form,\r\n        userId: userInfo.id,\r\n        newBalance: newBalance - this.totalPrice,\r\n        orderIdList: this.list.map(item => (item.id))\r\n      }\r\n      this.$apis.pay.payBill(params).then(res => {\r\n        if (res.status === 200) {\r\n          userInfo.balance = res.data.balance\r\n          this.$store.commit('setCartNum', 0)\r\n          localStorage.setItem('userInfo', JSON.stringify(userInfo))\r\n          alert('支付成功')\r\n          this.$router.push('/myOrder')\r\n        } else {\r\n          alert(res.desc)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.main {\r\n  margin-top: 190px;\r\n  min-height: 500px;\r\n  background-color: rgb(216, 216, 212);\r\n  .container {\r\n    display: flex;\r\n    margin: 0 auto;\r\n    padding-top: 30px;\r\n    width: 1000px;\r\n    // background-color: #fff;\r\n    .cart {\r\n      padding-top: 20px;\r\n      width: 450px;\r\n      .list {\r\n        margin-bottom: 15px;\r\n        li {\r\n          display: flex;\r\n          margin-top: 15px;\r\n          height: 65px;\r\n          // background-color: pink;\r\n          .img {\r\n            width: 65px;\r\n            height: 65px;\r\n            position: relative;\r\n            img {\r\n              border-radius: 6px;\r\n              background-size: contain;\r\n              background-position: center; /* 图片居中显示 */\r\n              background-repeat: no-repeat;\r\n            }\r\n            .point {\r\n              position: absolute;\r\n              top: 0;\r\n              right: 0;\r\n              width: 20px;\r\n              height: 20px;\r\n              transform: translate(40%,-40%);\r\n              border-radius: 50%;\r\n              text-align: center;\r\n              line-height: 20px;\r\n              font-size: 12px;\r\n              color: #fff;\r\n              background-color: rgb(90, 90, 90);\r\n            }\r\n          }\r\n          .name {\r\n            flex:1;\r\n            line-height: 65px;\r\n            padding-left: 15px;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n          }\r\n          .price {\r\n            line-height: 65px;\r\n          }\r\n        }\r\n      }\r\n      .total-box {\r\n        display: flex;\r\n        height: 25px;\r\n        padding-top: 25px;\r\n        border-top: 1px solid black;\r\n        h3 {\r\n          flex: 1;\r\n          line-height: 25px;\r\n          font-size: 22px;\r\n        }\r\n        .total {\r\n          line-height: 25px;\r\n          font-size: 22px;\r\n          color: black;\r\n        }\r\n      }\r\n\r\n    }\r\n    .right-box {\r\n      flex:1;\r\n      margin-left: 150px;\r\n      .form {\r\n        h4 {\r\n          margin-top: 20px;\r\n          font-weight: normal;\r\n        }\r\n        input {\r\n          margin-top: 6px;\r\n          padding: 10px 20px;\r\n          padding-top: 13px;\r\n          width: 100%;\r\n          height: 45px;\r\n          border: 1px solid rgb(2, 2, 2);\r\n          background-color: inherit;\r\n          font-size: 16px;\r\n          &::placeholder {\r\n            font-size: 14px;\r\n          }\r\n        }\r\n        .code-box {\r\n          display: flex;\r\n          .code {\r\n            width: 75%;\r\n          }\r\n          .send {\r\n            flex: 1;\r\n            cursor: pointer;\r\n            text-align: center;\r\n            margin-top: 6px;\r\n            line-height: 45px;\r\n            font-size: 12px;\r\n            &:hover {\r\n              color: rgba(0, 0, 0, 0.295);\r\n            }\r\n            &:active {\r\n              color: rgba(0, 0, 0, 0.115);\r\n            }\r\n          }\r\n          .pending {\r\n            color: rgba(0, 0, 0, 0.295);\r\n            &:active {\r\n              color: rgba(0, 0, 0, 0.295);\r\n            }\r\n          }\r\n        }\r\n        .submit {\r\n          margin-top: 24px;\r\n          width: 100%;\r\n          height: 45px;\r\n          background-color: rgb(2, 2, 2);\r\n          color: rgb(237, 237, 237);\r\n          text-align: center;\r\n          line-height: 45px;\r\n          font-size: 14px;\r\n          &:hover {\r\n            background-color: rgb(235, 79, 71);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Pay.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Pay.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Pay.vue?vue&type=template&id=225fae8b&scoped=true\"\nimport script from \"./Pay.vue?vue&type=script&lang=js\"\nexport * from \"./Pay.vue?vue&type=script&lang=js\"\nimport style0 from \"./Pay.vue?vue&type=style&index=0&id=225fae8b&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"225fae8b\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"footer\"},[_c('div',{staticClass:\"wechat\"},[_c('img',{attrs:{\"src\":require(\"@/assets/img/wechat.jpg\"),\"alt\":\"\"}}),_c('h4',[_vm._v(\"联系客服\")])])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"footer\">\r\n    <div class=\"wechat\">\r\n        <img src=\"@/assets/img/wechat.jpg\" alt=\"\">\r\n        <h4>联系客服</h4>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Footer'\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.footer {\r\n  width: 100%;\r\n  height: 400px;\r\n  overflow: hidden;\r\n  .wechat {\r\n    margin-left: 1100px;\r\n    margin-top: 155px;\r\n    width: 150px;\r\n    img{\r\n      width: 150px;\r\n      height: 150px;\r\n    }\r\n    h4 {\r\n      margin-top: 10px;\r\n      text-align: center;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Footer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Footer.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Footer.vue?vue&type=template&id=29128a84&scoped=true\"\nimport script from \"./Footer.vue?vue&type=script&lang=js\"\nexport * from \"./Footer.vue?vue&type=script&lang=js\"\nimport style0 from \"./Footer.vue?vue&type=style&index=0&id=29128a84&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"29128a84\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"header\",class:_vm.fixed&&'fix'},[_c('div',{staticClass:\"logo-box\"},[_vm._m(0),_c('div',{staticClass:\"line\"}),_c('a',{attrs:{\"href\":\"\"},on:{\"click\":function($event){return _vm.$router.push('/')}}},[_c('img',{attrs:{\"src\":require(\"@/assets/img/louislogo.jpg\"),\"alt\":\"\"}})])]),(_vm.showNavBox)?_c('div',{staticClass:\"tab-box\"},_vm._l((_vm.tablist),function(item){return _c('li',{key:item.id,class:item.id===_vm.activeTab&&'active-li',on:{\"click\":function($event){return _vm.tabChange(item.id)}}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),0):_vm._e(),(_vm.showLinkBox)?_c('div',{staticClass:\"link-box\"},[(!_vm.isLogin)?_c('li',{on:{\"click\":function($event){return _vm.$router.push('/login')}}},[_vm._v(\"登录\")]):_c('li',{on:{\"click\":_vm.logout}},[_vm._v(\"退出登录\")]),_c('li',{class:_vm.link==='order'&&'active-li',on:{\"click\":_vm.toMyOrder}},[_vm._v(\"我的订单\")]),_c('li',{staticClass:\"cart\",class:_vm.link==='cart'&&'active-li',on:{\"click\":_vm.showCart}},[_c('span',{staticClass:\"iconfont icon-24gl-bag\"}),_vm._v(_vm._s(_vm.$store.getters.cartNum))])]):_vm._e()]),(_vm.fixed&&!_vm.fix)?_c('div',{staticClass:\"phantom\"}):_vm._e()])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('a',{attrs:{\"href\":\"https://space.bilibili.com/501779432\",\"target\":\"_blank\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/img/brotherlouis.jpg\"),\"alt\":\"\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"header\" :class=\"fixed&&'fix'\">\r\n      <div class=\"logo-box\">\r\n        <a href=\"https://space.bilibili.com/501779432\" target=\"_blank\"><img src=\"@/assets/img/brotherlouis.jpg\" alt=\"\"></a>\r\n        <div class=\"line\"></div>\r\n        <a @click=\"$router.push('/')\" href=\"\"><img src=\"@/assets/img/louislogo.jpg\" alt=\"\"></a>\r\n      </div>\r\n      <div v-if=\"showNavBox\" class=\"tab-box\">\r\n        <li v-for=\"item in tablist\" :key=\"item.id\" @click=\"tabChange(item.id)\" :class=\"item.id===activeTab&&'active-li'\">\r\n          {{ item.name }}\r\n        </li>\r\n      </div>\r\n      <div v-if=\"showLinkBox\" class=\"link-box\">\r\n        <li v-if=\"!isLogin\" @click=\"$router.push('/login')\">登录</li>\r\n        <li v-else @click=\"logout\">退出登录</li>\r\n        <li @click=\"toMyOrder\" :class=\"link==='order'&&'active-li'\">我的订单</li>\r\n        <li @click=\"showCart\" class=\"cart\" :class=\"link==='cart'&&'active-li'\"><span class=\"iconfont icon-24gl-bag\"></span>{{$store.getters.cartNum}}</li>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"fixed&&!fix\" class=\"phantom\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport clearStorage from '@/utils/clearStorage'\r\nexport default {\r\n  name: 'Header',\r\n  props: {\r\n    tab: {\r\n      type: Number\r\n    },\r\n    link: {\r\n      type: String,\r\n      default: null\r\n    },\r\n    showNavBox: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    showLinkBox: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    fix: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      activeTab: null,\r\n      tablist: [\r\n        { id: 0, name: '全部' },\r\n        { id: 1, name: '唱片' },\r\n        { id: 2, name: '衣饰' },\r\n        { id: 3, name: '日用品' },\r\n        { id: 4, name: '其它' },\r\n        { id: 5, name: '特价' }\r\n      ],\r\n      isLogin: false,\r\n      fixed: false,\r\n      cartNum: 0\r\n    }\r\n  },\r\n  created () {\r\n    this.fixed = this.fix\r\n    this.activeTab = this.tab\r\n    this.isLogin = !!localStorage.getItem('refreshToken')\r\n    // this.cartNum = this.$store.state.cartNum\r\n    // this.isLogin && this.$apis.cart.getCartNum({ userId: JSON.parse(localStorage.getItem('userInfo')).id }).then(res => { this.cart = res.data.cartNum })\r\n  },\r\n  mounted () {\r\n    if (this.fix === false) window.addEventListener('scroll', this.handleScroll)\r\n  },\r\n  beforeDestroy () {\r\n    if (this.fix === false) window.removeEventListener('scroll', this.handleScroll)\r\n  },\r\n  methods: {\r\n    tabChange (typeId) {\r\n      this.activeTab = typeId\r\n      // this.$router.push({ path: '/', query: { typeId: typeId } })\r\n      this.$emit('tab-change', typeId)\r\n    },\r\n    logout () {\r\n      clearStorage()\r\n      this.isLogin = false\r\n      if (this.$route.path !== '/') {\r\n        this.$router.push('/')\r\n      } else {\r\n        location.reload()\r\n      }\r\n      // this.$router.replace('/')\r\n    },\r\n    toMyOrder () {\r\n      if (this.$route.path !== '/myOrder') {\r\n        this.$router.push('/myOrder')\r\n      }\r\n    },\r\n    showCart () {\r\n      if (this.$route.path !== '/cart') {\r\n        this.$router.push('/cart')\r\n      }\r\n    },\r\n    handleScroll () {\r\n      const scrollTop = window.scrollY\r\n      if (scrollTop >= 190) {\r\n        this.fixed = true\r\n      } else {\r\n        this.fixed = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.header {\r\n  z-index: 99;\r\n  position: relative;\r\n  padding-top: 30px;\r\n  width: 100%;\r\n  height: 190px;\r\n  background-color: rgb(210,210,207);;\r\n  .logo-box {\r\n    display: flex;\r\n    justify-content: center;\r\n    .line {\r\n      width: 2px;\r\n      background-color: rgb(96, 115, 126);\r\n    }\r\n    img {\r\n      width: 200px;\r\n      height: 100px;\r\n      object-fit: contain;\r\n    }\r\n  }\r\n  .tab-box {\r\n    padding-top: 20px;\r\n    display: flex;\r\n    justify-content: center;\r\n    gap: 50px;\r\n    li {\r\n      cursor: pointer;\r\n      padding-bottom: 5px;\r\n      &:hover {\r\n        border-bottom: 1px solid ;\r\n      }\r\n    }\r\n    .active-li {\r\n      border-bottom: 1px solid ;\r\n    }\r\n  }\r\n  .link-box {\r\n    position: absolute;\r\n    top: 110px;\r\n    right: 100px;\r\n    display: flex;\r\n    gap: 15px;\r\n    li {\r\n      cursor: pointer;\r\n      padding-bottom: 5px;\r\n      &:hover {\r\n        border-bottom: 1px solid;\r\n      }\r\n    }\r\n    .active-li {\r\n      border-bottom: 1px solid ;\r\n    }\r\n    .cart {\r\n      .iconfont {\r\n        margin-right: 3px;\r\n        font-size: 20px;\r\n      }\r\n    }\r\n  }\r\n}\r\n.fix {\r\n  position: fixed;\r\n  top: 0;\r\n}\r\n.phantom {\r\n  height: 190px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Header.vue?vue&type=template&id=2453b09b&scoped=true\"\nimport script from \"./Header.vue?vue&type=script&lang=js\"\nexport * from \"./Header.vue?vue&type=script&lang=js\"\nimport style0 from \"./Header.vue?vue&type=style&index=0&id=2453b09b&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2453b09b\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","on","handleTabChange","staticClass","_l","list","item","key","id","image","require","_v","_s","number","goodsName","price","toFixed","totalPrice","directives","name","rawName","value","form","address","expression","domProps","$event","target","composing","$set","email","code","sendStatus","sendCode","timeCounter","submit","staticRenderFns","components","Header","Footer","data","computed","res","reduce","sum","mounted","getCartList","methods","typeId","$router","push","path","query","$apis","cart","userId","JSON","parse","localStorage","getItem","then","status","map","images","console","log","desc","store","params","pay","timer","setInterval","clearTimeout","alert","userInfo","getBalance","newBalance","parseFloat","balance","setItem","stringify","orderIdList","payBill","$store","commit","component","_m","class","fixed","showNavBox","tablist","activeTab","tabChange","_e","showLinkBox","isLogin","logout","link","toMyOrder","showCart","getters","cartNum","fix","props","tab","type","Number","String","default","Boolean","created","window","addEventListener","handleScroll","beforeDestroy","removeEventListener","$emit","clearStorage","$route","location","reload","scrollTop","scrollY"],"sourceRoot":""}